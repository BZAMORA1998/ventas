<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-8">
            <h1 class="text-center">Roles</h1>
            <mat-horizontal-stepper [linear]="isLinear" #stepper>
            <mat-step [stepControl]="firstFormGroup" label="Lista de roles">
                <h1 class="text-center top-2">Lista de roles</h1>
                <div class="row justify-content-center">
                    <div class="col-12">
                        <table class="table text-center top-2">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Secuencia Rol</th>
                                <th>Nombre Rol</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr id="tr-{{i+1}}" (click)="seleccionarTr(i+1,item.secuenciaRol)" *ngFor="let item of data2;index as i" (click)=" consultarUrlPorRol(item.secuenciaRol)">
                                <td>{{i+1}}</td>
                                <td>{{item.secuenciaRol}}</td>
                                <td>{{item.nombre | titlecase}}</td>
                              </tr>
                            </tbody>
                          </table>
                    </div>
                </div>
                <div class="justify-content-between top-2">
                  <h3 class="inline"><b>Privilegios</b></h3>
                  <button type="button" id="guardar" (click)="guardar()" class="btn btn-primary inline float-right"></button>
                </div>
                <ul class="top-2">
                    <ng-template #recursiveList let-data>
                      <li *ngFor="let item of data ; index as i">
                        <div class="form-inline">
                        
                          <div class="posionIco">
                            <div *ngIf="item.rutas.length > 0">
                                <img (click)="isCheckImg(item.nombre,i+1)" 
                                id="img-{{item.nombre}}-{{i+1}}" 
                                 width="10" height="10" 
                                src="../../../assets/img/signo-menos.svg">
                            </div>    
                          </div>
                  
                          <input (change)="check(item.secuenciaRuta)" class="form-check-input {{item.id}}" [checked]="item.esSelect" type="checkbox" id="d-{{item.id}}">
                          <label class="form-check-label" for="d-{{item.nombre}}-{{item.id}}">
                            {{item.secuenciaRuta}}:{{item.description}}
                          </label>
                  
                        </div>
                  
                         <ul *ngIf="item.rutas.length > 0" class="checkOculto" id="check-{{item.nombre}}-{{i+1}}">
                           <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: item.rutas}"></ng-container>
                         </ul>
                         
                      </li>
                    </ng-template>
                    
                    <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: data}"></ng-container>
                  </ul>
                  
                  
            </mat-step>
            <mat-step [stepControl]="secondFormGroup" label="Crear un nuevo rol">
              <div class="row">
                  <div class="col-4">
                    <form >
                      <div class="form-group">
                        <label for="formGroupExampleInput">Nombre de rol</label>
                        <input  (change)="validaSiEsVacion()" type="text" 
                        class="form-control" id="formGroupExampleInput" placeholder="Nombre de rol"
                        name="nombreRol" #nombreRol="ngModel" [(ngModel)]="nombre">
                      </div>
                      <div class="form-group">
                        <button id="aceptar"
                        (click)="postRol()" type="button" class="btn btn-primary"
                        disabled>Guardar</button>
                      </div>
                    </form>
                  </div>
                  <div class="col-4">
                    <div class="form-group">
                      <label for="formGroupExampleInput">Nombre de rol</label>
                      <select class="custom-select">
                        <option selected>Seleccionar</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                    </div>
                  </div>
              </div>

            </mat-step>
         </mat-horizontal-stepper>            
        </div>
    </div>
</div>